CREATE DATABASE CompanyDB;
USE CompanyDB;

CREATE TABLE Employee (
    EMPNO SERIAL PRIMARY KEY,
    ENAME VARCHAR(50) NOT NULL,
    JOB VARCHAR(30) NOT NULL,
    MANAGER_NO INT,
    SAL DECIMAL(10,2),
    COMMISSION DECIMAL(10,2)
);





CREATE USER empuser WITH PASSWORD 'emp@123';

GRANT ALL PRIVILEGES ON DATABASE CompanyDB TO empuser;





BEGIN;

INSERT INTO Employee (ENAME, JOB, MANAGER_NO, SAL, COMMISSION) VALUES ('Ravi Kumar', 'Manager', NULL, 60000, 5000);
INSERT INTO Employee (ENAME, JOB, MANAGER_NO, SAL, COMMISSION) VALUES ('Sneha Rao', 'Analyst', 1, 45000, 3000);
INSERT INTO Employee (ENAME, JOB, MANAGER_NO, SAL, COMMISSION) VALUES ('Ajay Singh', 'Clerk', 2, 25000, NULL);

SELECT * FROM Employee;

ROLLBACK;

SELECT * FROM Employee;





ALTER TABLE Employee
    ALTER COLUMN EMPNO SET NOT NULL,
    ALTER COLUMN ENAME SET NOT NULL,
    ALTER COLUMN JOB SET NOT NULL;




ALTER TABLE Employee
    ADD CONSTRAINT pk_empno PRIMARY KEY (EMPNO);






INSERT INTO Employee (ENAME, JOB, MANAGER_NO, SAL, COMMISSION) VALUES (NULL, 'Test', 'Intern', NULL, 10000, NULL);

INSERT INTO Employee (ENAME, JOB, MANAGER_NO, SAL, COMMISSION) VALUES ('Priya Jain', 'HR', NULL, 30000, NULL);

SELECT * FROM Employee;
